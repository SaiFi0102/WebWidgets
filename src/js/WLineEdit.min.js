WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WLineEdit",function(E,c,f,h,p,i){function q(a){return f.charAt(a)==="_"}function j(a){d.setSelectionRange(c,a,a+1)}function l(a){for(;q(a);)a++;j(a);return a}function u(a){for(;a>0&&q(a);)a--;j(a);return a}function v(a,b){if(b>=f.length)return false;switch(f.charAt(b)){case "a":case "A":return a>=r&&a<=w||a>=s&&a<=x;case "n":case "N":return a>=r&&a<=w||a>=s&&a<=x||a>=m&&a<=n;case "X":case "x":return true;case "0":case "9":return a>=m&&a<=n;case "d":case "D":return a>=
y&&a<=n;case "#":return a>=m&&a<=n||a===F||a===G;case "h":case "H":return a>=s&&a<=H||a>=m&&a<=n||a>=r&&a<=I;case "b":case "B":return a===m||a===y}return false}function o(a){var b=c.value.substring(0,a.start),e=c.value.substring(a.end),g=h.substring(a.start,a.end);c.value=b+g+e;d.setSelectionRange(c,a.start,a.start)}function t(a,b,e){var g=b=b;if(!e&&h.charAt(b)!==a&&!v(a.charCodeAt(0),b)&&b-1>=0&&h.charAt(b-1)===a)return b;for(;h.charAt(b)!==a&&!v(a.charCodeAt(0),b)&&b<f.length;)b++;if(b===f.length)return g;
e=c.value.substring(0,b);g=c.value.substring(b+1);if(h.charAt(b)!==a)if(p.charAt(b)===">")a=a.toUpperCase();else if(p.charAt(b)==="<")a=a.toLowerCase();c.value=e+a+g;b++;return b}function z(a){if(f!==""){d.cancelEvent(a,d.CancelDefaultAction);var b=d.getSelectionRange(c);b.start!==b.end&&o(b);var e=undefined;if(window.clipboardData&&window.clipboardData.getData)e=window.clipboardData.getData("Text");else if(a.clipboardData&&a.clipboardData.getData)e=a.clipboardData.getData("text/plain");else return;
a="";var g=0;for(b=b.start;g<e.length;g++){a=e.charAt(g);b=t(a,b,true)}l(b)}}function A(a){if(f!==""){d.cancelEvent(a,d.CancelDefaultAction);var b=d.getSelectionRange(c);if(b.start!==b.end){var e=c.value.substring(b.start,b.end);if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.setData("Text",e);else a.clipboardData&&a.clipboardData.setData&&a.clipboardData.setData("text/plain",e);o(b)}}}function B(){if(f!=="")if(c.value===""){c.value=h;l(0)}}var r="a".charCodeAt(0),I="f".charCodeAt(0),
w="z".charCodeAt(0),s="A".charCodeAt(0),H="F".charCodeAt(0),x="Z".charCodeAt(0),F="-".charCodeAt(0),G="+".charCodeAt(0),m="0".charCodeAt(0),y="1".charCodeAt(0),n="9".charCodeAt(0);jQuery.data(c,"lobj",this);var J=this,d=E.WT,K=$(c);this.getValue=function(){if(f==="")return c.value;var a=c.value,b="",e="",g=0,k=0;for(g=0;g<a.length;g++){e=a.charAt(g);if(e!==i&&f.charAt(g)!=="_")k+=1;if(e!==i||f.charAt(g)==="_")b+=e}return k>0?b:""};this.setValue=function(a){if(f===""||!d.hasFocus(c))c.value=a;else{var b=
d.getSelectionRange(c),e=-1;c.value=h;for(var g=0,k=0,C="";g<a.length;g++){C=a.charAt(g);if(b.start===b.end&&b.start===g)e=k;k=t(C,k,true)}if(e!==-1)j(e);else a.length==0&&j(0)}};this.setInputMask=function(a,b,e,g){f=a;h=b;p=e;i=g};if(f!==""){this.setInputMask(f,h,p,i);this.setValue(this.getValue())}this.keyDown=function(a,b){if(f!=="")switch(b.keyCode){case 39:d.cancelEvent(b,d.CancelDefaultAction);a=d.getSelectionRange(c);a.end-a.start<=1?l(a.start+1):d.setSelectionRange(c,a.end,a.end);break;case 37:d.cancelEvent(b,
d.CancelDefaultAction);a=d.getSelectionRange(c);a.end-a.start<=1?u(a.start-1):d.setSelectionRange(c,a.start,a.start);break;case 36:d.cancelEvent(b,d.CancelDefaultAction);l(0);break;case 35:d.cancelEvent(b,d.CancelDefaultAction);d.setSelectionRange(c,f.length,f.length);break;case 46:d.cancelEvent(b,d.CancelDefaultAction);a=d.getSelectionRange(c);if(a.end-a.start<=1){a=a.start;if(a<f.length&&!q(a)){b=c.value.substring(0,a);var e=c.value.substring(a+1);c.value=b+i+e;d.setSelectionRange(c,a,a)}}else o(a);
break;case 8:d.cancelEvent(b,d.CancelDefaultAction);a=d.getSelectionRange(c);if(a.end-a.start<=1){a=a.start-1;if(a>=0){a=u(a);if(!q(a)){b=c.value.substring(0,a);e=c.value.substring(a+1);c.value=b+i+e;j(a)}}}else o(a);break}};this.keyPressed=function(a,b){if(f!==""){a=b.charCode||b.keyCode;if(!(a===0||a===13||a===10)){d.cancelEvent(b,d.CancelDefaultAction);b=d.getSelectionRange(c);b.start<b.end&&o(b);b=t(String.fromCharCode(a),b.start);l(b)}}};var D=this.getValue();this.focussed=function(){if(f!==
""){D=this.getValue();setTimeout(function(){J.setValue(c.value)},0)}};this.blurred=function(){if(f!==""){c.value=this.getValue();c.value!==D&&K.change()}};this.clicked=function(){if(f!==""){var a=d.getSelectionRange(c);a.start===a.end&&j(a.start)}};if(c.addEventListener)c.addEventListener("paste",z,false);else c.attachEvent&&c.attachEvent("onpaste",z);if(c.addEventListener)c.addEventListener("cut",A,false);else c.attachEvent&&c.attachEvent("oncut",A);if(c.addEventListener)c.addEventListener("input",
B,false);else c.attachEvent&&c.attachEvent("oninput",B)});
